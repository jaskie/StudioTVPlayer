<Window x:Class="StudioTVPlayer.View.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:mainViewModels="clr-namespace:StudioTVPlayer.ViewModel.Main"
        xmlns:mainViews="clr-namespace:StudioTVPlayer.View.Main"
        xmlns:configurationViews="clr-namespace:StudioTVPlayer.View.Configuration"
        xmlns:configurationViewModels="clr-namespace:StudioTVPlayer.ViewModel.Configuration" 
        xmlns:viewmodel="clr-namespace:StudioTVPlayer.ViewModel"
        mc:Ignorable="d"    
        WindowStyle="SingleBorderWindow"
        ResizeMode="CanResize"        
        BorderBrush="{StaticResource Program_SecondaryColor}"         
        Background="{StaticResource Program_SecondaryColor}"
        Title="Studio TV Player" Height="1024" Width="1280"
        WindowStartupLocation="CenterScreen">
    <Window.DataContext>
        <viewmodel:MainViewModel/>
    </Window.DataContext>
   
    <Window.Style>
        <Style TargetType="Window">
            <Setter Property="WindowChrome.WindowChrome">
                <Setter.Value>
                    <WindowChrome  
                        CaptionHeight="30"                        
                        ResizeBorderThickness="7"
                        GlassFrameThickness="0" />
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="WindowState" Value="Maximized">
                    <Setter Property="BorderThickness" Value="10" />
                    <Setter Property="WindowChrome.WindowChrome">
                        <Setter.Value>
                            <WindowChrome 
                                CaptionHeight="30"
                                ResizeBorderThickness="0"
                                GlassFrameThickness="7" />
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Style>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition Height="auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid Background="{StaticResource Program_SecondaryColor}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="100" />
            </Grid.ColumnDefinitions>
            <Image WindowChrome.IsHitTestVisibleInChrome="False" Margin="5" Width="16" Source="..\StudioTVPlayer.ico" />
            <Label WindowChrome.IsHitTestVisibleInChrome="False" Grid.Column="1" Content="StudioTVPlayer" VerticalAlignment="Center" Padding="0" Foreground="{StaticResource Program_Foreground}" />
            <Grid Grid.Column="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="33*" />
                    <ColumnDefinition Width="33*" />
                    <ColumnDefinition Width="33*" />
                </Grid.ColumnDefinitions>
                <Button x:Name="Button_Close" WindowChrome.IsHitTestVisibleInChrome="True" Grid.Column="2" Click="Button_Close_Click">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Background" Value="Transparent" />
                            <Setter Property="BorderThickness" Value="0" />
                            <Setter Property="HorizontalAlignment" Value="Stretch" />
                            <Setter Property="VerticalAlignment" Value="Stretch" />
                            <Setter Property="Template" Value="{StaticResource WindowButtonsControlTemplate}" />
                            <Setter Property="ContentTemplate">
                                <Setter.Value>
                                    <DataTemplate>
                                        <Grid Background="{x:Null}" IsHitTestVisible="False" HorizontalAlignment="Center" VerticalAlignment="Center">
                                            <Line Margin="5" X1="0" Y1="0" X2="20" Y2="20" Stroke="Gray" StrokeThickness="1" />
                                            <Line Margin="5" X1="20" Y1="0" X2="0" Y2="20" Stroke="Gray" StrokeThickness="1" />
                                        </Grid>
                                    </DataTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>
                <Button x:Name="Button_Maximize" WindowChrome.IsHitTestVisibleInChrome="True" 
                        HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
                        HorizontalContentAlignment="Stretch"
                        VerticalContentAlignment="Stretch"
                        Padding="0" BorderThickness="0" Grid.Column="1" Click="Button_Maximize_Click">
                    <Button.Resources>
                        <DataTemplate x:Key="MaximizeSquare">
                            <Rectangle Margin="0" Height="20" Width="{Binding Height, RelativeSource={x:Static RelativeSource.Self}}" Fill="{x:Null}" 
                                       StrokeThickness="1" Stroke="Gray" />
                        </DataTemplate>

                        <DataTemplate x:Key="MinimizeSquares">
                            <Grid Background="#00000000" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
                                <Rectangle Width="10" Height="8" Margin="5,0,0,5" VerticalAlignment="Center" HorizontalAlignment="Center" 
                                           Fill="{x:Null}" StrokeThickness="1" Stroke="Gray" />
                                <Rectangle Width="10" Height="8" Margin="0,5,5,0" VerticalAlignment="Center" HorizontalAlignment="Center" 
                                           Fill="{x:Null}" StrokeThickness="1" Stroke="Gray" />
                            </Grid>
                        </DataTemplate>
                    </Button.Resources>
                    <Button.Style>
                        <Style TargetType="{x:Type Button}">
                            <Setter Property="ContentTemplate" Value="{StaticResource MaximizeSquare}" />
                            <Setter Property="Background" Value="#00000000" />
                            <Setter Property="Template" Value="{StaticResource WindowButtonsControlTemplate}" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding WindowState, RelativeSource={RelativeSource AncestorType=Window}}" Value="Maximized">
                                    <Setter Property="ContentTemplate" Value="{StaticResource MinimizeSquares}" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                <Button x:Name="Button_Minimize" WindowChrome.IsHitTestVisibleInChrome="True" Grid.Column="0" Click="Button_Minimize_Click">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="BorderThickness" Value="0" />
                            <Setter Property="Background" Value="#00000000" />
                            <Setter Property="Template" Value="{StaticResource WindowButtonsControlTemplate}" />
                            <Setter Property="HorizontalAlignment" Value="Stretch" />
                            <Setter Property="VerticalAlignment" Value="Stretch" />
                            <Setter Property="ContentTemplate">
                                <Setter.Value>
                                    <DataTemplate>
                                        <Grid Background="{x:Null}">
                                            <Line X1="0" Y1="20" X2="20" Y2="20" HorizontalAlignment="Center" StrokeThickness="1" Stroke="Gray" />
                                        </Grid>
                                    </DataTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>
            </Grid>
        </Grid>
        <Menu Grid.Row="1" Height="40" FontSize="15" Foreground="{StaticResource Program_Foreground}" Background="{StaticResource Program_SecondaryColor}" >
            <Menu.ItemContainerStyle>
                <Style TargetType="MenuItem">
                    <Setter Property="Padding" Value="10" />
                </Style>
            </Menu.ItemContainerStyle>
            <MenuItem Header="Sterowanie" Command="{Binding SwitchToPilotingCommand}">
                <MenuItem.Icon>
                    <ContentControl Content="{StaticResource ControlIcon}" Margin="5" />
                </MenuItem.Icon>
            </MenuItem>
            <MenuItem Header="Ustawienia" Command="{Binding SwitchToConfigurationCommand}">
                <MenuItem.Icon>
                    <ContentControl Content="{StaticResource SettingsIcon}" Margin="5" />
                </MenuItem.Icon>
            </MenuItem>
        </Menu>
        <ContentControl Focusable="False" IsTabStop="False" Grid.Row="2" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Content="{Binding CurrentViewModel}" >
            <ContentControl.Resources>
                <DataTemplate DataType="{x:Type mainViewModels:PilotingViewModel}">
                    <mainViews:PilotingView />
                </DataTemplate>
                <DataTemplate DataType="{x:Type configurationViewModels:ConfigurationViewModel}">
                    <configurationViews:OptionsView />
                </DataTemplate>
            </ContentControl.Resources>
        </ContentControl>
    </Grid>
</Window>
